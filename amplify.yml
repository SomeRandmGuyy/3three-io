version: 1
applications:
  - appRoot: nuxt
    env:
      variables:
        API_BASE_URL: "http://13.237.139.178:8000/v2"
        PROXY_API_URL: "http://13.237.139.178:3002"
        NODE_ENV: "production"
        NUXT_ENV_API_BASE_URL: "http://13.237.139.178:8000/v2"
        NUXT_ENV_PROXY_API_URL: "http://13.237.139.178:3002"
        PORT: "3003"
        HOST: "0.0.0.0"
        DATABASE_URL: "mysql://user:password@hostname:port/dbname"
        AUTH_SECRET: "your_secret_key"
        REDIS_URL: "redis://localhost:6379"
        MAIL_HOST: "smtp.example.com"
        MAIL_PORT: "587"
        MAIL_USERNAME: "your_email@example.com"
        MAIL_PASSWORD: "your_email_password"
        CLOUDINARY_URL: "cloudinary://API_KEY:API_SECRET@CLOUD_NAME"
        S3_BUCKET_NAME: "your_s3_bucket_name"
    frontend:
      phases:
        preBuild:
          commands:
            - npm install -g nuxi
            - npm install
        build:
          commands:
            - npx nuxi build
      artifacts:
        baseDirectory: .output/public
        files:
          - '**/*'
      cache:
        paths:
          - node_modules/**/*
  - appRoot: nowui
    env:
      variables:
        API_BASE_URL: "http://13.237.139.178:8000/v2"
        PROXY_API_URL: "http://13.237.139.178:3004"
        NODE_ENV: "production"
        NUXT_ENV_API_BASE_URL: "http://13.237.139.178:8000/v2"
        NUXT_ENV_PROXY_API_URL: "http://13.237.139.178:3004"
        PORT: "3003"
        HOST: "0.0.0.0"
        DATABASE_URL: "mysql://user:password@hostname:port/dbname"
        AUTH_SECRET: "your_secret_key"
        REDIS_URL: "redis://localhost:6379"
        MAIL_HOST: "smtp.example.com"
        MAIL_PORT: "587"
        MAIL_USERNAME: "your_email@example.com"
        MAIL_PASSWORD: "your_email_password"
        CLOUDINARY_URL: "cloudinary://API_KEY:API_SECRET@CLOUD_NAME"
        S3_BUCKET_NAME: "your_s3_bucket_name"
    frontend:
      phases:
        preBuild:
          commands:
            - npm install
        build:
          commands:
            - npm run build
      artifacts:
        baseDirectory: dist
        files:
          - '**/*'
      cache:
        paths:
          - node_modules/**/*
