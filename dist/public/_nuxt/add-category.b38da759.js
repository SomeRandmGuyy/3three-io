import V from"./ArgonInput.8d0576a6.js";import M from"./ArgonButton.a79d4a57.js";import{P as N,Q as S,R as _,S as $,o as E,b as T,e as s,T as g,l as m,u as t,w as k,h as q,U as f}from"./entry.6e39450e.js";import{u as A}from"./CategoryStore.cfacd2c0.js";import{u as B,c as h,r as y}from"./index.c39e5092.js";import{i as b,g as v,c as R}from"./errorHandler.790c67ca.js";import"./index.aad0ddd6.js";import"./tslib.es6.4057be70.js";const D={class:"card shadow-lg mx-4 p-3 mt-4"},L={class:"d-flex justify-content-between px-4 pt-3"},U=s("h5",{class:"font-weight-bolder mb-0"},"Add Category",-1),I=s("span",{class:"btn-inner--text"},"Back to list",-1),J=[I],O={class:"mt-4"},j={class:"col-12 mt-sm-0"},F=s("label",null,"Name",-1),P={class:"col-12 mt-sm-0"},Q=s("label",null,"Description",-1),z={class:"button-row d-flex mt-4"},se={__name:"add-category",async setup(G){let d,u;const p=N(),a=A();a.allCategoriesList||([d,u]=S(()=>a.getAllCategoriesList()),await d,u());const r=_({name:"",description:""}),o=_([]),x=$(()=>({name:{required:h.withMessage("The name field is required",y)},description:{required:h.withMessage("The description field is required",y)}})),c=B(x,r),w=async()=>{o.value=[],c.value.$validate();const l=R(r.name,a.allCategoriesList);if(c.value.$error||l){const e=JSON.parse(JSON.stringify(c.value.$errors));o.value=[...e],l&&(o.value=[...o.value,{$property:"name",$message:"The category with this name already exists."}])}else try{const e=await a.createCategory(r.name,r.description);if(e.error.value){const n=e.error.value.data.errors[0].detail;throw new Error(n)}else f("success","Category created successfuly"),p.push({path:"/examples/category-management/list-categories"})}catch(e){f("error",e.message)}};return(l,e)=>{const n=V,C=M;return E(),T("div",D,[s("div",L,[U,s("button",{onClick:e[0]||(e[0]=g(i=>t(p).push({path:"/examples/category-management/list-categories"}),["prevent"])),type:"button",class:"btn base-button btn-icon btn-fab btn-primary btn-sm"},J)]),s("div",O,[s("form",{role:"form",onSubmit:g(w,["prevent"])},[s("div",j,[F,m(n,{id:"name",name:"name",class:"multisteps-form__input",type:"text",placeholder:"Name",modelValue:t(r).name,"onUpdate:modelValue":e[1]||(e[1]=i=>t(r).name=i),error:t(b)("name",t(o)),errorMessage:t(v)("name",t(o))},null,8,["modelValue","error","errorMessage"])]),s("div",P,[Q,m(n,{id:"description",name:"description",class:"multisteps-form__input",type:"text",placeholder:"Description",modelValue:t(r).description,"onUpdate:modelValue":e[2]||(e[2]=i=>t(r).description=i),error:t(b)("description",t(o)),errorMessage:t(v)("description",t(o))},null,8,["modelValue","error","errorMessage"])]),s("div",z,[m(C,{type:"submit",color:"primary",variant:"gradient",class:"ms-auto mb-0"},{default:k(()=>[q(" Submit ")]),_:1})])],32)])])}}};export{se as default};
