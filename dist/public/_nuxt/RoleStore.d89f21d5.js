import{V as d,U as n,D as u}from"./entry.6e39450e.js";import{J as h,u as i}from"./index.aad0ddd6.js";const m=d(),l=m.public.apiBaseUrl;let a=localStorage.getItem("authToken");const c=new h,y=async({pageNumber:e,pageSize:t,sort:s,filter:p})=>{try{a=localStorage.getItem("authToken");const o=await i(`${l}/roles?${s?"sort="+s:"sort=created_at"}&${p?"filter[name]="+p:""}&page[number]=${e||1}&page[size]=${t||5}`,{method:"GET",headers:{Authorization:`Bearer ${a}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$hXHE6MzM0z");return{data:c.deserialize(o.data.value),meta:o.data.value.meta.page}}catch(o){n("error",o.message)}},R=async()=>{try{a||(a=localStorage.getItem("authToken"));const e=await i(`${l}/roles`,{method:"GET",headers:{Authorization:`Bearer ${a}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$LFhtpy3EyF");return c.deserialize(e.data.value)}catch(e){n("error",e.message)}},g=async e=>{try{const t=await i(`${l}/roles/${e}`,{method:"GET",headers:{Authorization:`Bearer ${a}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$sbRJIMViPB");return c.deserialize(t.data.value)}catch(t){n("error",t.message)}},$=async({name:e})=>{try{const t=c.serialize({stuff:{type:"roles",name:e,permissions:[{type:"permissions",id:"1"}],relationshipNames:["permissions"]}});return await i(`${l}/roles`,{method:"POST",headers:{Authorization:`Bearer ${a}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"},body:t},"$LoxvPSw1aN")}catch(t){n("error",t.message)}},v=async({roleId:e,name:t})=>{try{const s=c.serialize({stuff:{type:"roles",id:e,name:t,permissions:[{type:"permissions",id:"1"}],relationshipNames:["permissions"]}});return await i(`${l}/roles/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"},body:s},"$1BRAyHvIA6")}catch(s){n("error",s.message)}},A=async e=>{try{return await i(`${l}/roles/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$7kBnd2bPgG")}catch(t){n("error",t.message)}},r={getRolesList:y,getAllRolesList:R,getRoleById:g,createRole:$,updateRole:v,deleteRole:A},z=u("RoleStore",{state:()=>({rolesList:null,allRolesList:null,pageMeta:null,currentRole:null}),actions:{async getRolesList({pageNumber:e,pageSize:t,sort:s,filter:p}){const o=await r.getRolesList({pageNumber:e,pageSize:t,sort:s,filter:p});this.rolesList=o.data,this.pageMeta=o.meta},async getAllRolesList(){this.allRolesList=await r.getAllRolesList()},async getRole(e){this.rolesList?this.currentRole=this.rolesList.find(t=>t.id===e):this.currentRole=await r.getRoleById(e)},async createRole(e){return await r.createRole({name:e})},async updateRole(e,t){return await r.updateRole({roleId:e,name:t})},async deleteRole(e){return await r.deleteRole(e)}}});export{z as u};
