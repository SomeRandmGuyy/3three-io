import{V as $,U as u,D as f}from"./entry.6e39450e.js";import{J as A,u as d}from"./index.aad0ddd6.js";const v=$(),l=v.public.apiBaseUrl;let r=localStorage.getItem("authToken");const y=new A,w=async({pageNumber:e,pageSize:t,sort:a,filter:o})=>{try{r=localStorage.getItem("authToken");const s=await d(`${l}/items?${a?"sort="+a:"sort=created_at"}&${o?"filter[name]="+o:""}&page[number]=${e||1}&page[size]=${t||5}&include=category,tags`,{method:"GET",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$x4z79oi4GQ");return{data:y.deserialize(s.data.value),meta:s.data.value.meta.page}}catch(s){u("error",s.message)}},L=async()=>{try{const e=await d(`${l}/items?include=category,tags`,{method:"GET",headers:{Authorization:`Bearer ${r}`}},"$7hDPaanBA2");return y.deserialize(e.data.value)}catch(e){u("error",e.message)}},z=async e=>{try{const t=await d(`${l}/items/${e}?include=category,tags`,{method:"GET",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$ylO5b6WsUx");return y.deserialize(t.data.value)}catch(t){u("error",t.message)}},B=async({name:e,description:t,status:a,image:o,isOnHomepage:s,date:n,tags:c,category:m})=>{try{const i=[];for(const h of c)i.push({type:"tags",id:h});const g=y.serialize({stuff:{type:"items",name:e,description:t,excerpt:t,status:a,image:o,is_on_homepage:s,date_at:n,tags:i,category:{type:"categories",id:m},relationshipNames:["category","tags"]}});return await d(`${l}/items?include=category,tags`,{method:"POST",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"},body:g},"$uVy6JIacaI")}catch(i){u("error",i.message)}},j=async({itemId:e,name:t,description:a,status:o,image:s,isOnHomepage:n,date:c,tags:m,category:i})=>{try{const g=[];for(const I of m)g.push({type:"tags",id:I});const h=y.serialize({stuff:{type:"items",id:e,name:t,description:a,excerpt:a,status:o,image:s,is_on_homepage:n,date_at:c,tags:g,category:{type:"categories",id:i},relationshipNames:["category","tags"]}});return await d(`${l}/items/${e}?include=category,tags`,{method:"PATCH",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"},body:h},"$EaeW5WfgCd")}catch(g){u("error",g.message)}},T=async e=>{try{return await d(`${l}/items/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$ofOUXiJE17")}catch(t){u("error",t.message)}},C=async(e,t)=>{const a=new FormData;return a.append("attachment",e.value.files[0]),(await d(`${l}/uploads/items/${t}/image`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:a},"$U7WzLXVzyg")).data.value.url},p={getItemsList:w,getAllItemsList:L,getItemById:z,createItem:B,updateItem:j,deleteItem:T,uploadItemImage:C},b=f("ItemStore",{state:()=>({allItemsList:null,itemsList:null,pageMeta:null,selectedItem:null}),actions:{async getItemsList({pageNumber:e,pageSize:t,sort:a,filter:o}){const s=await p.getItemsList({pageNumber:e,pageSize:t,sort:a,filter:o});this.itemsList=s.data,this.pageMeta=s.meta},async getAllItemsList(){this.allItemsList=await p.getAllItemsList()},async getItem(e){this.itemsList?this.selectedItem=this.itemsList.find(t=>t.id===e):this.selectedItem=await p.getItemById(e)},async createItem({name:e,description:t,category:a,date:o,image:s,isOnHomepage:n,status:c,tags:m}){return await p.createItem({name:e,description:t,category:a,date:o,image:s,isOnHomepage:n,status:c,tags:m})},async updateItem({itemId:e,name:t,description:a,category:o,date:s,image:n,isOnHomepage:c,status:m,tags:i}){return await p.updateItem({itemId:e,name:t,description:a,category:o,date:s,image:n,isOnHomepage:c,status:m,tags:i})},async deleteItem(e){return await p.deleteItem(e)},async uploadItemImage(e,t){return await p.uploadItemImage(e,t)}}});export{b as u};
