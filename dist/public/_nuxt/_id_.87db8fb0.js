import S from"./ArgonInput.8d0576a6.js";import T from"./ArgonButton.a79d4a57.js";import{J as k,P as q,Q as y,a4 as A,R as p,S as B,o as R,b as D,e as s,T as f,l as g,u as e,w as I,h as J,U as h}from"./entry.6e39450e.js";import{u as L}from"./CategoryStore.cfacd2c0.js";import{u as U,c as b,r as v}from"./index.c39e5092.js";import{i as x,g as w,c as O}from"./errorHandler.790c67ca.js";import"./index.aad0ddd6.js";import"./tslib.es6.4057be70.js";const j={class:"card shadow-lg mx-4 p-3 mt-4"},F={class:"d-flex justify-content-between px-4 pt-3"},P=s("h5",{class:"font-weight-bolder mb-0"},"Edit Category",-1),Q=s("span",{class:"btn-inner--text"},"Back to list",-1),z=[Q],G={class:"mt-4"},H={class:"col-12 mt-sm-0"},K=s("label",null,"Name",-1),W={class:"col-12 mt-sm-0"},X=s("label",null,"Description",-1),Y={class:"button-row d-flex mt-4"},le={__name:"[id]",async setup(Z){let i,l;const{$isDemo:C,$demoMessage:M}=k(),_=q(),a=L();a.allCategoriesList||([i,l]=y(()=>a.getAllCategoriesList()),await i,l());const{params:{id:m}}=A();let o=p({name:"",description:""});const r=p([]),V=async()=>{await a.getCategory(m),o=p({...a.selectedCategory})};[i,l]=y(()=>V()),await i,l();const $=B(()=>({name:{required:b.withMessage("The name field is required",v)},description:{required:b.withMessage("The description field is required",v)}})),d=U($,o),N=async()=>{r.value=[],d.value.$validate();const u=O(o.name,a.allCategoriesList,a.selectedCategory.name);if(d.value.$error||u){const t=JSON.parse(JSON.stringify(d.value.$errors));r.value=[...t],u&&(r.value=[...r.value,{$property:"name",$message:"The category with this name already exists."}])}else try{const t=await a.updateCategory(m,o.name,o.description);if(t.error.value){const c=t.error.value.data.errors[0].detail;throw new Error(c)}else h("success","Category updated successfuly"),_.push({path:"/examples/category-management/list-categories"})}catch(t){h("error",t.message)}};return(u,t)=>{const c=S,E=T;return R(),D("div",j,[s("div",F,[P,s("button",{onClick:t[0]||(t[0]=f(n=>e(_).push({path:"/examples/category-management/list-categories"}),["prevent"])),type:"button",class:"btn base-button btn-icon btn-fab btn-primary btn-sm"},z)]),s("div",G,[s("form",{role:"form",onSubmit:t[3]||(t[3]=f(n=>e(C)(e(m))?e(M)("categories"):N(),["prevent"]))},[s("div",H,[K,g(c,{id:"name",name:"name",class:"multisteps-form__input",type:"text",placeholder:"Name",modelValue:e(o).name,"onUpdate:modelValue":t[1]||(t[1]=n=>e(o).name=n),error:e(x)("name",e(r)),errorMessage:e(w)("name",e(r))},null,8,["modelValue","error","errorMessage"])]),s("div",W,[X,g(c,{id:"description",name:"description",class:"multisteps-form__input",type:"text",placeholder:"Description",modelValue:e(o).description,"onUpdate:modelValue":t[2]||(t[2]=n=>e(o).description=n),error:e(x)("description",e(r)),errorMessage:e(w)("description",e(r))},null,8,["modelValue","error","errorMessage"])]),s("div",Y,[g(E,{type:"submit",color:"primary",variant:"gradient",class:"ms-auto mb-0"},{default:I(()=>[J(" Submit ")]),_:1})])],32)])])}}};export{le as default};
