import x from"./ArgonInput.8d0576a6.js";import w from"./ArgonButton.a79d4a57.js";import{P as y,Q as T,R as p,S as V,o as B,b as E,e as t,T as _,l as m,u as s,w as N,h as S,U as h}from"./entry.6e39450e.js";import{u as $}from"./TagStore.0779537d.js";import{u as M,c as k,r as A}from"./index.c39e5092.js";import{i as F,g as C,c as R}from"./errorHandler.790c67ca.js";import{s as q}from"./index.ea15eb99.js";import"./index.aad0ddd6.js";import"./tslib.es6.4057be70.js";const L={class:"card shadow-lg mx-4 p-3 mt-4"},U={class:"d-flex justify-content-between px-4 pt-3"},I=t("h5",{class:"font-weight-bolder mb-0"},"Add Tag",-1),J=t("span",{class:"btn-inner--text"},"Back to list",-1),O=[J],j={class:"mt-4"},D={class:"col-12 mt-sm-0"},H=t("label",null,"Name",-1),P={class:"col-12 mt-sm-0"},Q=t("label",null,"Color",-1),z={class:"button-row d-flex mt-4"},oe={__name:"add-tag",async setup(G){let u,d;const g=y(),r=$();r.allTagsList||([u,d]=T(()=>r.getAllTagsList()),await u,d());const a=p({tag:"",color:{a:1,hex:"#40BEBF",hex8:"#40BEBFFF",hsl:{h:180.55612770339857,s:.5,l:.5,a:1},hsv:{h:180.55612770339857,s:.6666666666666666,v:.75,a:1},oldHue:180.55612770339857,rgba:{r:64,g:190,b:191,a:1},source:"hsl"}}),o=p([]),f=V(()=>({tag:{required:k.withMessage("The tag name field is required",A)}})),n=M(f,a),b=async()=>{o.value=[],n.value.$validate();const i=R(a.tag,r.allTagsList);if(n.value.$error||i){const e=JSON.parse(JSON.stringify(n.value.$errors));o.value=[...e],i&&(o.value=[...o.value,{$property:"tag",$message:"The tag already exists."}])}else try{const e=await r.createTag(a.tag,a.color.hex);if(e.error.value){const c=e.error.value.data.errors[0].detail;throw new Error(c)}else h("success","Tag created successfuly"),g.push({path:"/examples/tag-management/list-tags"})}catch(e){h("error",e.message)}};return(i,e)=>{const c=x,v=w;return B(),E("div",L,[t("div",U,[I,t("button",{onClick:e[0]||(e[0]=_(l=>s(g).push({path:"/examples/tag-management/list-tags"}),["prevent"])),type:"button",class:"btn base-button btn-icon btn-fab btn-primary btn-sm"},O)]),t("div",j,[t("form",{role:"form",onSubmit:_(b,["prevent"])},[t("div",D,[H,m(c,{id:"tag",name:"tag",class:"multisteps-form__input",type:"text",placeholder:"Tag Name",modelValue:s(a).tag,"onUpdate:modelValue":e[1]||(e[1]=l=>s(a).tag=l),error:s(F)("tag",s(o)),errorMessage:s(C)("tag",s(o))},null,8,["modelValue","error","errorMessage"])]),t("div",P,[Q,m(s(q),{modelValue:s(a).color,"onUpdate:modelValue":e[2]||(e[2]=l=>s(a).color=l),class:"w-100"},null,8,["modelValue"])]),t("div",z,[m(v,{type:"submit",color:"primary",variant:"gradient",class:"ms-auto mb-0"},{default:N(()=>[S(" Submit ")]),_:1})])],32)])])}}};export{oe as default};
