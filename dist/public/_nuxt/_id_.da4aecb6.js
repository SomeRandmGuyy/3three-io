import $ from"./ArgonInput.8d0576a6.js";import N from"./ArgonButton.a79d4a57.js";import{J as E,P as M,Q as f,a4 as S,R as p,S as k,o as A,b as B,e as s,T as b,l as g,u as t,w as R,h as C,U as h}from"./entry.6e39450e.js";import{u as q}from"./TagStore.0779537d.js";import{u as I,c as J,r as L}from"./index.c39e5092.js";import{i as U,g as D,c as O}from"./errorHandler.790c67ca.js";import{s as j}from"./index.ea15eb99.js";import"./index.aad0ddd6.js";import"./tslib.es6.4057be70.js";const F={class:"card shadow-lg mx-4 p-3 mt-4"},P={class:"d-flex justify-content-between px-4 pt-3"},Q=s("h5",{class:"font-weight-bolder mb-0"},"Edit Tag",-1),z=s("span",{class:"btn-inner--text"},"Back to list",-1),G=[z],H={class:"mt-4"},K={class:"col-12 mt-sm-0"},W=s("label",null,"Name",-1),X={class:"col-12 mt-sm-0"},Y=s("label",null,"Color",-1),Z={class:"button-row d-flex mt-4"},ce={__name:"[id]",async setup(ee){let l,m;const{$isDemo:v,$demoMessage:x}=E(),_=M(),o=q();o.allTagsList||([l,m]=f(()=>o.getAllTagsList()),await l,m());const{params:{id:i}}=S();let a=p({name:"",color:"#000000"});const r=p([]),T=async()=>{await o.getTag(i),a=p({...o.selectedTag})};[l,m]=f(()=>T()),await l,m();const w=k(()=>({name:{required:J.withMessage("The tag name field is required",L)}})),c=I(w,a),y=async()=>{r.value=[],c.value.$validate();const u=O(a.name,o.allTagsList,o.selectedTag.name);if(c.value.$error||u){const e=JSON.parse(JSON.stringify(c.value.$errors));r.value=[...e],u&&(r.value=[...r.value,{$property:"name",$message:"The tag already exists."}])}else try{const e=await o.updateTag(i,a.name,a.color.hex);if(e.error.value){const d=e.error.value.data.errors[0].detail;throw new Error(d)}else h("success","Tag updated successfuly"),_.push({path:"/examples/tag-management/list-tags"})}catch(e){h("error",e.message)}};return(u,e)=>{const d=$,V=N;return A(),B("div",F,[s("div",P,[Q,s("button",{onClick:e[0]||(e[0]=b(n=>t(_).push({path:"/examples/tag-management/list-tags"}),["prevent"])),type:"button",class:"btn base-button btn-icon btn-fab btn-primary btn-sm"},G)]),s("div",H,[s("form",{role:"form",onSubmit:e[3]||(e[3]=b(n=>t(v)(t(i))?t(x)("tags"):y(),["prevent"]))},[s("div",K,[W,g(d,{id:"name",name:"name",class:"multisteps-form__input",type:"text",placeholder:"Tag Name",modelValue:t(a).name,"onUpdate:modelValue":e[1]||(e[1]=n=>t(a).name=n),error:t(U)("name",t(r)),errorMessage:t(D)("name",t(r))},null,8,["modelValue","error","errorMessage"])]),s("div",X,[Y,g(t(j),{modelValue:t(a).color,"onUpdate:modelValue":e[2]||(e[2]=n=>t(a).color=n),class:"w-100"},null,8,["modelValue"])]),s("div",Z,[g(V,{type:"submit",color:"primary",variant:"gradient",class:"ms-auto mb-0"},{default:R(()=>[C(" Submit ")]),_:1})])],32)])])}}};export{ce as default};
