import{V as u,U as l,D as m}from"./entry.6e39450e.js";import{J as h,u as i}from"./index.aad0ddd6.js";const y=u(),c=y.public.apiBaseUrl;let o=localStorage.getItem("authToken");const d=new h,U=async({pageNumber:e,pageSize:t,sort:a,filter:r})=>{try{o=localStorage.getItem("authToken");const s=await i(`${c}/users?${a?"sort="+a:"sort=created_at"}&${r?"filter[name]="+r:""}&page[number]=${e||1}&page[size]=${t||5}&include=roles`,{method:"GET",headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$btGMnrcyyV");return{data:d.deserialize(s.data.value),meta:s.data.value.meta.page}}catch(s){l("error",s.message)}},g=async e=>{try{const t=await i(`${c}/users/${e}?include=roles`,{method:"GET",headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$MpcRBVn3HN");return d.deserialize(t.data.value)}catch(t){l("error",t.message)}},$=async({name:e,email:t,password:a,passwordConfirm:r,role:s})=>{try{const p=d.serialize({stuff:{type:"users",name:e,email:t,password:a,password_confirmation:r,roles:[{type:"roles",id:s}],relationshipNames:["roles"]}});return await i(`${c}/users?include=roles`,{method:"POST",headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"},body:p},"$q2WqqUfbK4")}catch(p){l("error",p.message)}},f=async(e,t)=>{try{return await i(`${c}/users/${e}?include=roles`,{method:"PATCH",headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"},body:t},"$eK7nQdfC5y")}catch(a){l("error",a.message)}},w=async e=>{try{return await i(`${c}/users/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$wGihMh4umY")}catch(t){l("error",t.message)}},v=async(e,t)=>{const a=new FormData;return a.append("attachment",e.value.files[0]),(await i(`${c}/uploads/users/${t}/profile-image`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:a},"$7n4Gv4fIWp")).data.value.url},n={getUsersList:U,getUserById:g,createUser:$,updateUser:f,deleteUser:w,uploadProfileImage:v},B=m("UserStore",{state:()=>({usersList:null,pageMeta:null,allUsersList:null,selectedUser:null}),actions:{async getUsersList({pageNumber:e,pageSize:t,sort:a,filter:r}){const s=await n.getUsersList({pageNumber:e,pageSize:t,sort:a,filter:r});this.usersList=s.data,this.pageMeta=s.meta},async getAllUsersList(){this.allUsersList=await tagService.getAllUsersList()},async getUser(e){this.usersList?this.selectedUser=this.usersList.find(t=>t.id===e):this.selectedUser=await n.getUserById(e)},async createUser({email:e,name:t,password:a,passwordConfirm:r,role:s}){return await n.createUser({email:e,name:t,password:a,passwordConfirm:r,role:s})},async updateUser(e,t){return await n.updateUser(e,t)},async deleteUser(e){return await n.deleteUser(e)},async uploadProfileImage(e,t){return await n.uploadProfileImage(e,t)}}});export{B as u};
