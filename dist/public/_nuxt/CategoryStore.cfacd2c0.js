import{V as p,U as n,D as l}from"./entry.6e39450e.js";import{J as y,u as c}from"./index.aad0ddd6.js";const u=p(),g=u.public.apiBaseUrl;let r=localStorage.getItem("authToken");const d=new y,h=async({pageNumber:e,pageSize:t,sort:a,filter:o})=>{try{r=localStorage.getItem("authToken");const s=await c(`${g}/categories?${a?"sort="+a:"sort=created_at"}&${o?"filter[name]="+o:""}&page[number]=${e||1}&page[size]=${t||5}`,{method:"GET",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$396XXVr5i4");return{data:d.deserialize(s.data.value),meta:s.data.value.meta.page}}catch(s){n("error",s.message)}},C=async()=>{try{r||(r=localStorage.getItem("authToken"));const e=await c(`${g}/categories`,{method:"GET",headers:{Authorization:`Bearer ${r}`}},"$jglrZ2ZHEo");return d.deserialize(e.data.value)}catch(e){n("error",e.message)}},m=async e=>{try{const t=await c(`${g}/categories/${e}`,{method:"GET",headers:{Authorization:`Bearer ${r}`}},"$wXRudDi2PT");return d.deserialize(t.data.value)}catch(t){n("error",t.message)}},$=async({name:e,description:t})=>{try{const a=d.serialize({stuff:{type:"categories",name:e,description:t}});return await c(`${g}/categories`,{method:"POST",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"},body:a},"$d8CtbQ1iCE")}catch(a){n("error",a.message)}},L=async({categoryId:e,name:t,description:a})=>{try{const o=d.serialize({stuff:{type:"categories",id:e,name:t,description:a}});return await c(`${g}/categories/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"},body:o},"$21YXxpUv65")}catch(o){n("error",o.message)}},v=async e=>{try{return await c(`${g}/categories/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$an68fvL6Yj")}catch(t){n("error",t.message)}},i={getCategoriesList:h,getAllCategoriesList:C,getCategoryById:m,createCategory:$,updateCategory:L,deleteCategory:v},f=l("CategoryStore",{state:()=>({categoriesList:null,pageMeta:null,allCategoriesList:null,selectedCategory:null}),actions:{async getCategoriesList({pageNumber:e,pageSize:t,sort:a,filter:o}){const s=await i.getCategoriesList({pageNumber:e,pageSize:t,sort:a,filter:o});this.categoriesList=s.data,this.pageMeta=s.meta},async getAllCategoriesList(){this.allCategoriesList=await i.getAllCategoriesList()},async getCategory(e){this.categoriesList?this.selectedCategory=this.categoriesList.find(t=>t.id===e):this.selectedCategory=await i.getCategoryById(e)},async createCategory(e,t){return await i.createCategory({name:e,description:t})},async updateCategory(e,t,a){return await i.updateCategory({categoryId:e,name:t,description:a})},async deleteCategory(e){return await i.deleteCategory(e)}}});export{f as u};
