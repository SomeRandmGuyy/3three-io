import{V as l,U as i,D as d}from"./entry.6e39450e.js";import{J as u,u as c}from"./index.aad0ddd6.js";const T=l(),g=T.public.apiBaseUrl;let o=localStorage.getItem("authToken");const p=new u,h=async({pageNumber:a,pageSize:t,sort:e,filter:s})=>{try{o=localStorage.getItem("authToken");const r=await c(`${g}/tags?${e?"sort="+e:"sort=created_at"}&${s?"filter[name]="+s:""}&page[number]=${a||1}&page[size]=${t||5}`,{method:"GET",headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$MwHBzL0t6B");return{data:p.deserialize(r.data.value),meta:r.data.value.meta.page}}catch(r){i("error",r.message)}},y=async()=>{try{const a=await c(`${g}/tags?sort=-created_at`,{method:"GET",headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$YKuRXhOeno");return p.deserialize(a.data.value)}catch(a){i("error",a.message)}},m=async a=>{try{const t=await c(`${g}/tags/${a}`,{method:"GET",headers:{Authorization:`Bearer ${o}`}},"$ex71xAmDLy");return p.deserialize(t.data.value)}catch(t){i("error",t.message)}},$=async({name:a,color:t})=>{try{const e=p.serialize({stuff:{type:"tags",name:a,color:t}});return await c(`${g}/tags`,{method:"POST",headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"},body:e},"$dFFZ2C9IxG")}catch(e){i("error",e.message)}},L=async({tagId:a,name:t,color:e})=>{try{const s=p.serialize({stuff:{type:"tags",id:a,name:t,color:e}});return await c(`${g}/tags/${a}`,{method:"PATCH",headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"},body:s},"$RjdsgSW1sk")}catch(s){i("error",s.message)}},A=async a=>{try{return await c(`${g}/tags/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.api+json","Content-type":"application/vnd.api+json"}},"$pa5oIJpBQT")}catch(t){i("error",t.message)}},n={getTagsList:h,getAllTagsList:y,getTagById:m,createTag:$,updateTag:L,deleteTag:A},B=d("TagStore",{state:()=>({allTagsList:null,tagsList:null,pageMeta:null,selectedTag:null}),actions:{async getTagsList({pageNumber:a,pageSize:t,sort:e,filter:s}){const r=await n.getTagsList({pageNumber:a,pageSize:t,sort:e,filter:s});this.tagsList=r.data,this.pageMeta=r.meta},async getAllTagsList(){this.allTagsList=await n.getAllTagsList()},async getTag(a){this.tagsList?this.selectedTag=this.tagsList.find(t=>t.id===a):this.selectedTag=await n.getTagById(a)},async createTag(a,t){return await n.createTag({name:a,color:t})},async updateTag(a,t,e){return await n.updateTag({tagId:a,name:t,color:e})},async deleteTag(a){return await n.deleteTag(a)}}});export{B as u};
